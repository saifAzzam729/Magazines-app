# ๐ Magazine Subscriptions API

ูุธุงู ุฅุฏุงุฑุฉ ุงุดุชุฑุงูุงุช ุงููุฌูุงุช ุงูุฑูููุฉ - Node.js (TypeScript + Fastify + Prisma) ูุน ูุธุงู ุตูุงุญูุงุช ูุชูุฏูุ ุงูุชุนูููุงุชุ ูุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ.

## โจ ุงููููุฒุงุช

- **ูุธุงู ุตูุงุญูุงุช ูุชูุฏู**: ADMIN, PUBLISHER, SUBSCRIBER
- **ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช**: ุฅูุดุงุกุ ุชูุนููุ ุฅูุบุงุกุ ุงูุชูุงุก ุตูุงุญูุฉ
- **ูุธุงู ุงูุชุนูููุงุช**: ูุน ุฅุฏุงุฑุฉ ุงููุดุฑููู
- **ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ**: ูุญุต ุงูุงุดุชุฑุงูุงุช ุงูููุชููุฉ ูุงูุชูุงุฑูุฑ ุงูููููุฉ
- **ุชุณุฌูู ุงูุฃูุดุทุฉ**: ุชุชุจุน ุฌููุน ุงูุนูููุงุช
- **ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: ููุงูุจ HTML ุฌูููุฉ
- **API ูุซุงุฆููุฉ**: Swagger UI + Postman Collection

## ๐ ุงููุชุทูุจุงุช

- Node.js 20+
- PostgreSQL 13+

## ๐ ุงูุฅุนุฏุงุฏ ูุงูุชุดุบูู

### 1. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุงูุณุฎ ููู `env.example` ุฅูู `.env`:

```bash
cp env.example .env
```

ุฃู ุฃูุดุฆ ููู `.env` ูุฏููุงู:

```env
# Environment Configuration
NODE_ENV=development
PORT=3000
HOST=0.0.0.0
BASE_URL=http://localhost:3000

# JWT Configuration
JWT_SECRET=supersecretjwtkeychangeme

# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/magazine_subscriptions?schema=public

# Email Configuration
EMAIL_FROM=no-reply@example.com

# Ethereal Email Configuration (for development/testing)
# These credentials are pre-configured for testing
ETHEREAL_USER=bernie90@ethereal.email
ETHEREAL_PASS=RXwCT65GmPMtvCguWs

# Optional SMTP Configuration (falls back to Ethereal in development)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# Optional Admin Email for Daily Reports
# ADMIN_EMAIL=admin@example.com
```

### 2. ุชุซุจูุช ุงูุชุจุนูุงุช

```bash
npm install
```

### 3. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุทุจูู ุงููุงูุฌุฑูุดู
npm run prisma:migrate

# ููุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
npm run prisma:seed
```

### 4. ุชุดุบูู ุงูุฎุงุฏู

```bash
# ูุถุน ุงูุชุทููุฑ (ูุน ุฅุนุงุฏุฉ ุงูุชุญููู ุงูุชููุงุฆู)
npm run dev

# ุฃู ูุถุน ุงูุฅูุชุงุฌ
npm run build
npm start
```

## ๐ ุงูุฃูุงูุฑ ุงููุชุงุญุฉ

| ุงูุฃูุฑ | ุงููุตู |
|-------|--------|
| `npm run dev` | ุชุดุบูู ุงูุฎุงุฏู ูุน ุฅุนุงุฏุฉ ุงูุชุญููู ุงูุชููุงุฆู |
| `npm run build` | ุชุฌููุน ุงููุดุฑูุน ุฅูู ูุฌูุฏ `dist/` |
| `npm start` | ุชุดุบูู ุงูุฎุงุฏู ุงููุฌูุน |
| `npm run prisma:migrate` | ุชุทุจูู ูุงูุฌุฑูุดู ูุงุนุฏุฉ ุงูุจูุงูุงุช |
| `npm run prisma:studio` | ูุชุญ Prisma Studio |
| `npm run prisma:seed` | ููุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ |
| `npm run test:email` | ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |

## ๐ ููุงุท ุงูููุงูุฉ (API Endpoints)

### ุงูุตุญุฉ ุงูุนุงูุฉ
- `GET /v1/health` - ูุญุต ุญุงูุฉ ุงูุฎุงุฏู

### ุงููุตุงุฏูุฉ ูุงูุชูููุถ
- `POST /v1/auth/register` - ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- `POST /v1/auth/login` - ุชุณุฌูู ุงูุฏุฎูู
- `POST /v1/auth/refresh` - ุชุฌุฏูุฏ ุงูุฑูุฒ ุงููููุฒ
- `POST /v1/auth/logout` - ุชุณุฌูู ุงูุฎุฑูุฌ
- `POST /v1/auth/forgot-password` - ุทูุจ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- `POST /v1/auth/reset-password` - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- `POST /v1/auth/verify-email` - ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ุฅุฏุงุฑุฉ ุงููุฌูุงุช
- `GET /v1/magazines` - ูุงุฆูุฉ ุงููุฌูุงุช
- `POST /v1/magazines` - ุฅูุดุงุก ูุฌูุฉ ุฌุฏูุฏุฉ (PUBLISHER/ADMIN)
- `PUT /v1/magazines/:id` - ุชุญุฏูุซ ูุฌูุฉ (PUBLISHER/ADMIN)
- `DELETE /v1/magazines/:id` - ุญุฐู ูุฌูุฉ (PUBLISHER/ADMIN)

### ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช
- `GET /v1/subscriptions` - ูุงุฆูุฉ ุงูุงุดุชุฑุงูุงุช (ADMIN ููุท)
- `POST /v1/subscriptions` - ุฅูุดุงุก ุงุดุชุฑุงู ุฌุฏูุฏ
- `POST /v1/subscriptions/:id/activate` - ุชูุนูู ุงุดุชุฑุงู (ADMIN/PUBLISHER)
- `POST /v1/subscriptions/:id/cancel` - ุฅูุบุงุก ุงุดุชุฑุงู

### ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช
- `GET /v1/comments` - ูุงุฆูุฉ ุงูุชุนูููุงุช ุงููุนุชูุฏุฉ
- `POST /v1/comments` - ุฅูุดุงุก ุชุนููู ุฌุฏูุฏ
- `GET /v1/comments/pending` - ูุงุฆูุฉ ุงูุชุนูููุงุช ุงููุนููุฉ (ADMIN ููุท)
- `POST /v1/comments/:id/approve` - ุงุนุชูุงุฏ ุชุนููู (ADMIN ููุท)

### ุงูุฅุฏุงุฑุฉ
- `GET /v1/admin/users` - ูุงุฆูุฉ ุงููุณุชุฎุฏููู (ADMIN ููุท)
- `PATCH /v1/admin/users/:id/role` - ุชุญุฏูุซ ุฏูุฑ ุงููุณุชุฎุฏู (ADMIN ููุท)
- `GET /v1/admin/roles` - ูุงุฆูุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช (ADMIN ููุท)
- `GET /v1/admin/me/permissions` - ุตูุงุญูุงุชู ุงูุญุงููุฉ

## ๐ฅ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

### ADMIN (ูุฏูุฑ)
- ุฌููุน ุงูุตูุงุญูุงุช
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุฃุฏูุงุฑ
- ุงุนุชูุงุฏ ุงูุชุนูููุงุช
- ุนุฑุถ ุฌููุน ุงูุงุดุชุฑุงูุงุช

### PUBLISHER (ูุงุดุฑ)
- ุฅุฏุงุฑุฉ ุงููุฌูุงุช (ุฅูุดุงุกุ ุชุญุฏูุซุ ุญุฐู)
- ุชูุนูู ุงูุงุดุชุฑุงูุงุช
- ุนุฑุถ ุงูุชุนูููุงุช

### SUBSCRIBER (ูุดุชุฑู)
- ุฅูุดุงุก ุงูุงุดุชุฑุงูุงุช
- ุฅูุบุงุก ุงูุงุดุชุฑุงูุงุช
- ุฅูุดุงุก ุงูุชุนูููุงุช
- ุนุฑุถ ุงููุฌูุงุช

## ๐ง ูุธุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ุฅุนุฏุงุฏ Ethereal (ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ)
- ุงููุธุงู ููุนุฏ ูุณุจูุงู ูุงุณุชุฎุฏุงู Ethereal Email ููุงุฎุชุจุงุฑ
- ุจูุงูุงุช ุงูุงุชุตุงู: `bernie90@ethereal.email`
- ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏ ุฅุถุงูู - ูุนูู ูุจุงุดุฑุฉ

### ุงูููุงูุจ ุงููุชุงุญุฉ
- `emailVerification.html` - ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- `passwordReset.html` - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- `subscriptionActive.html` - ุชูุนูู ุงูุงุดุชุฑุงู
- `subscriptionReminder.html` - ุชุฐููุฑ ุงูุชูุงุก ุงูุงุดุชุฑุงู
- `reportTemplate.html` - ุชูุฑูุฑ ูููู

### ูู ูุถุน ุงูุชุทููุฑ
- ูุณุชุฎุฏู Ethereal Email ุชููุงุฆูุงู ุฅุฐุง ูู ูุชู ุชูููู SMTP
- ุฌููุน ุงูุฑุณุงุฆู ุชูุฑุณู ุฅูู ุตูุฏูู Ethereal ููุงุฎุชุจุงุฑ
- ููููู ูุฑุงุฌุนุฉ ุงูุฑุณุงุฆู ูู ูุงุฌูุฉ Ethereal

### ููุฅูุชุงุฌ
- ูู ุจุชูููู ูุชุบูุฑุงุช SMTP ุงูุฎุงุตุฉ ุจู
- ุฃู ุงุณุชุฎุฏู ูุฒูุฏ ุฎุฏูุฉ ุจุฑูุฏ ุฅููุชุฑููู ุขุฎุฑ

### ุงุฎุชุจุงุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
```bash
# ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุนูู ุจุฏูู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช)
npm run test:email
```

ูุฐุง ุงูุฃูุฑ ุณูุฑุณู ุฑุณุงุฆู ุชุฌุฑูุจูุฉ ุฅูู ุตูุฏูู Ethereal ููุงุฎุชุจุงุฑ.
**ููุงุญุธุฉ**: ูุฐุง ุงูุงุฎุชุจุงุฑ ูุนูู ุจุดูู ูุณุชูู ููุง ูุญุชุงุฌ ุฅูู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช.

## โฐ ุงูููุงู ุงููุฌุฏููุฉ

- **01:00 ููููุงู**: ูุญุต ุงูุงุดุชุฑุงูุงุช ุงูููุชููุฉ ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช
- **01:30 ููููุงู**: ุฅุฑุณุงู ุงูุชูุฑูุฑ ุงููููู ูููุฏูุฑ (ุฅุฐุง ุชู ุชูููู ADMIN_EMAIL)

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุฑุงุฌุน ููู `docs/erd.mmd` ููุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุงูู.

## ๐ ุงููุซุงุฆู


### How does `Magazines-app` work under the hood?

Check out this interactive walkthrough of the `Magazines-app` codebase on CodeCanvas [here](https://www.code-canvas.com/?session=unauthenticatedGithub&repo=Magazines-app&owner=saifAzzam729&branch=main&OnboardingTutorial=true).

To refine existing dataflow simulation or create new ones, follow the quick tutorial [here](https://docs.code-canvas.com/updating-diagram).

<img width="1916" alt="CodeCanvas Screenshot" src="https://codecanvas-media-public.s3.amazonaws.com/images/codecanvas-readme-screenshot.png" />

- **Swagger UI**: `http://localhost:3000/docs`
- **OpenAPI Spec**: `http://localhost:3000/openapi.json`
- **Postman Collection**: `docs/postman_collection.json`
- **Postman Guide**: `POSTMAN_GUIDE.md`

## ๐งช ุงูุงุฎุชุจุงุฑ

### ูุฌููุนุฉ Postman ุงูุดุงููุฉ
ุงุณุชุฎุฏู ูุฌููุนุฉ Postman ุงููุญุฏุซุฉ ูู `docs/postman_collection.json` ุงูุชู ุชุญุชูู ุนูู:

- โ **ุฌููุน ููุงุท ุงูููุงูุฉ** ูุน ุฃูุซูุฉ ูุงูุนูุฉ
- โ **ุงุฎุชุจุงุฑุงุช ุชููุงุฆูุฉ** ูุญูุธ ุงูุฑููุฒ ุงููููุฒุฉ
- โ **ุณููุงุฑูููุงุช ูุงููุฉ** ููุงุฎุชุจุงุฑ
- โ **ูุชุบูุฑุงุช ุฏููุงููููุฉ** ููุจูุงูุงุช
- โ **ุชูุธูู ููุทูู** ุญุณุจ ุงููุธููุฉ

### ุฏููู ุงูุงุณุชุฎุฏุงู
ุฑุงุฌุน `POSTMAN_GUIDE.md` ููุญุตูู ุนูู ุชุนูููุงุช ููุตูุฉ ุญูู:
- ููููุฉ ุงุณุชูุฑุงุฏ ุงููุฌููุนุฉ
- ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช
- ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ
- ูุตุงุฆุญ ุงูุงุณุชุฎุฏุงู

## ๐ ููุงุญุธุงุช ูููุฉ

- ุฌููุน ุงูุทูุจุงุช ุชุชุทูุจ ูุตุงุฏูุฉ ุจุงุณุชุซูุงุก ุงูุชุณุฌูู ูุชุณุฌูู ุงูุฏุฎูู
- ุงุณุชุฎุฏู `Authorization: Bearer <token>` ูู ุฑุคูุณ ุงูุทูุจุงุช
- ูุชู ุชุณุฌูู ุฌููุน ุงูุฃูุดุทุฉ ุชููุงุฆูุงู
- ุงููุธุงู ูุฏุนู ุงูุชุฌููุน (Pagination) ูู ุฌููุน ููุงุฆู ุงูุจูุงูุงุช

## ๐ ูููุงุช ุงููุดุฑูุน ุงููููุฉ

- `README.md` - ุงูุฏููู ุงูุฑุฆูุณู
- `QUICKSTART.md` - ุฏููู ุงูุชุดุบูู ุงูุณุฑูุน
- `POSTMAN_GUIDE.md` - ุฏููู ุงุณุชุฎุฏุงู Postman
- `PROJECT_SUMMARY.md` - ููุฎุต ุงููุดุฑูุน ุงููุงูู
- `env.example` - ูุซุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- `docs/postman_collection.json` - ูุฌููุนุฉ Postman ุดุงููุฉ
- `docs/erd.mmd` - ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `test-email.js` - ุงุฎุชุจุงุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

## ๐ฏ ุงููุดุฑูุน ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

ุฌููุน ุงููุชุทูุจุงุช ุงูุณุจุนุฉ ุชู ุชูููุฐูุง ุจุงููุงูู ูุน ูููุฒุงุช ุฅุถุงููุฉ ุงุญุชุฑุงููุฉ.